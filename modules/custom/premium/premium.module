<?php

/**
 * Implements hook_block_view_BASE_BLOCK_ID_ALTER().
 */

function premium_block_view_premium_status_alter(array &$build, \Drupal\Core\Block\BlockPluginInterface $block)
{
    $build['#pre_render'][] = '_premium_block_premium_prerender';

   // kint($block);
}

function _premium_block_premium_prerender(array $build)
{
    $build['content']['#prefix'] = '<h4>';
    $build['content']['#suffix'] = '</h4>';
    $build['content']['#markup'] = 'Mon message modifiÃ©';
    return $build;
}

/**
 * Implements hook_theme().
 */
function premium_theme($existing, $type, $theme, $path)
{
    $variables = array(
        'amIPremium' => array(
            'variables' => array(
                'message' => NULL,
                'color' => NULL,
            ),
            'template' => 'amIPremium',
        ),
    );
    return $variables;
}

/**
 * Implements hook_user_login().
 */
function premium_user_login($form_state, $form_id = 'premium_admin_setting')
{
    drupal_set_message(t('Hello @name, @message', array(
        '@name' => \Drupal::currentUser()->getUserName(),
        '@message' => $form_state->getValue('message'),
        )
    ));   

}